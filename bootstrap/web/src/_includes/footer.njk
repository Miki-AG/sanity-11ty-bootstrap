{# Global footer (from globals.footer). Nunjucks-safe. #}
{% if globals and globals.footer %}
  {% set f = globals.footer %}
  <footer class="bg-body-tertiary mt-5 pt-5 pb-4">
    <div class="container">
      {% if f.text %}
        <div class="mb-4">{{ f.text | pt | safe }}</div>
      {% endif %}

      {% if f.columns and (f.columns | length) > 0 %}
        <div class="row g-4">
          {% for col in f.columns %}
            <div class="col-6 col-md-3">
              {% if col.title %}<h3 class="h6">{{ col.title }}</h3>{% endif %}
              {% if col.items and (col.items | length) > 0 %}
                <ul class="list-unstyled">
                  {% for link in col.items %}
                    <li><a class="link-body-emphasis text-decoration-none" href="{{ link.url }}">{{ link.text }}</a></li>
                  {% endfor %}
                </ul>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      {% endif %}

      {# Contact links from site settings #}
      {% if globals and (globals.emailAddress or globals.twitterHandle) %}
        <div class="mt-4 text-center">
          {% if globals.emailAddress %}
            You can email me <a class="link-body-emphasis" href="mailto:{{ globals.emailAddress }}">here</a>
          {% endif %}
          &nbsp;â€”&nbsp;
          {% if globals.twitterHandle %}
            {% set tw = globals.twitterHandle %}
            {% set twDisplay = tw %}
            {% if tw and tw[0] != '@' %}{% set twDisplay = '@' ~ tw %}{% endif %}
            Or reach out on <a class="link-body-emphasis" href="https://twitter.com/{{ tw | replace('@', '') }}">Twitter/X</a>
          {% endif %}
        </div>
      {% endif %}

      <div class="text-body-secondary small mt-4">{{ f.copyright or '' }}</div>
    </div>
  </footer>
{% endif %}
