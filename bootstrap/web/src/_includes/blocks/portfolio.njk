{# Portfolio block: left column Recent Work, right column rich text. Optional column swap. #}
{% set leftFirst = true %}
{% if block.invert %}{% set leftFirst = false %}{% endif %}
{% set leftColOrder = 'order-md-1' %}
{% set rightColOrder = 'order-md-2' %}
{% if not leftFirst %}
  {% set leftColOrder = 'order-md-2' %}
  {% set rightColOrder = 'order-md-1' %}
{% endif %}
{% set title = block.title or 'Recent Work' %}

<section class="container my-5">
  <div class="row g-4">
    <div class="col-md-8 {{ leftColOrder }}">
      <div>
        <h4 class="fst-italic">{{ title }}</h4>
        {% if block.items and (block.items | length) > 0 %}
          <ul class="list-unstyled">
            {% for item in block.items %}
              <li>
                {% set href = item.url or '#' %}
                <a class="d-flex flex-column flex-lg-row gap-3 align-items-start align-items-lg-center py-3 link-body-emphasis text-decoration-none border-top" href="{{ href }}">
                  {% if item.imageUrl %}
                    <img src="{{ item.imageUrl }}" alt="" class="bd-placeholder-img" width="100%" height="96" style="object-fit:cover;">
                  {% else %}
                    <svg aria-hidden="true" class="bd-placeholder-img" width="100%" height="96" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice">
                      <rect width="100%" height="100%" fill="#777"></rect>
                    </svg>
                  {% endif %}
                  <div class="col-lg-8">
                    {% if item.title %}<h6 class="mb-0">{{ item.title }}</h6>{% endif %}
                    {% if item.meta %}<small class="text-body-secondary">{{ item.meta }}</small>{% endif %}
                  </div>
                </a>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <div class="alert alert-warning mb-0">No work items configured.</div>
        {% endif %}
      </div>
    </div>
    <div class="col-md-4 {{ rightColOrder }}">
      <div class="position-sticky" style="top: 2rem">
        <div class="p-4 mb-3 bg-body-tertiary rounded">
          {% if block.right and block.right[0] and block.right[0]._type %}
            {{ block.right | pt | safe }}
          {% else %}
            {{ block.right | safe }}
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</section>
