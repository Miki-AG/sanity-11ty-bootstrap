---
pagination: { data: posts, size: 1, alias: post }
permalink: "/blog/{{ post.slug | url }}/index.html"
layout: base.njk
eleventyComputed: { title: "{{ post.title }}" }
---
{# Optional hero detection like landing pages #}
{% set hasHero = false %}
{% if post.blocks and (post.blocks | length) > 0 %}
  {% for b in post.blocks %}
    {% if b._type == 'heroCover' %}{% set hasHero = true %}{% endif %}
  {% endfor %}
{% endif %}

{% if not hasHero %}
  <section class="container my-4">
    <h1 class="display-5 text-start">{{ post.title }}</h1>
    <p class="text-muted mb-0 d-flex align-items-center gap-2">
      {% if post.publishedAt %}
        <small>{{ post.publishedAt | dateFmt }}</small>
      {% endif %}
      {% if post.author and post.author.name %}
        <small class="d-flex align-items-center gap-2">
          <span>Â·</span>
          {% if post.author.imageUrl %}
            <img src="{{ post.author.imageUrl }}" alt="{{ post.author.name }}" class="avatar" loading="lazy" />
          {% endif %}
          <span>by {{ post.author.name }}</span>
        </small>
      {% endif %}
    </p>
  </section>
{% endif %}

{# Render blocks #}
{% for block in post.blocks %}
  {% include "blocks/" + block._type + ".njk" %}
{% endfor %}
